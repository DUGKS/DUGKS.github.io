<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/DUGKS/DUGKS.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/DUGKS/DUGKS.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/DUGKS/DUGKS.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/DUGKS/DUGKS.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/DUGKS/DUGKS.github.io/css/main.css">


<link rel="stylesheet" href="/DUGKS/DUGKS.github.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.com","root":"/DUGKS/DUGKS.github.io/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="命由我作 福自己求">
<meta property="og:url" content="https://github.com/DUGKS/DUGKS.github.io/index.html">
<meta property="og:site_name" content="命由我作 福自己求">
<meta property="og:locale" content="zh_CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://github.com/DUGKS/DUGKS.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>命由我作 福自己求</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/DUGKS/DUGKS.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">命由我作 福自己求</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/DUGKS/DUGKS.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/DUGKS/DUGKS.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/%E7%90%90%E7%A2%8E%E7%9A%84%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/%E7%90%90%E7%A2%8E%E7%9A%84%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">琐碎的命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-15 16:33:59" itemprop="dateModified" datetime="2021-02-15T16:33:59+08:00">2021-02-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>ImageMagick 生成gif<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">convert -delay 0 &#96;ls -tr *.png&#96; -loop 0 animated.gif</span><br></pre></td></tr></table></figure></li>
<li>Git查看分支图<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --graph --decorate --oneline --simplify-by-decoration --all</span><br></pre></td></tr></table></figure></li>
<li>Linux改变文件权限<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -type d -exec chmod 0755 &#123;&#125; \;</span><br><span class="line">find . -type f -exec chmod 0644 &#123;&#125; \;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/The-Common-Used-Commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/The-Common-Used-Commands/" class="post-title-link" itemprop="url">The-Common-Used-Commands</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-11 10:27:59" itemprop="dateModified" datetime="2021-01-11T10:27:59+08:00">2021-01-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>Change all folders to 755 and all files to 644<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -type d -exec chmod 0755 &#123;&#125; \;</span><br><span class="line">find . -type f -exec chmod 0644 &#123;&#125; \;</span><br></pre></td></tr></table></figure></li>
<li>ImageMagick 生成gif<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">convert -delay 0 &#96;ls -tr *.png&#96; -loop 0 animated.gif</span><br></pre></td></tr></table></figure></li>
<li>Git查看分支图<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --graph --decorate --oneline --simplify-by-decoration --all</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/The%20implementation%20of%20physical%20boundary%20condtion%20in%20AMReX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/The%20implementation%20of%20physical%20boundary%20condtion%20in%20AMReX/" class="post-title-link" itemprop="url">The implementation of physical boundary condition in AMReX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-27 16:33:38" itemprop="dateModified" datetime="2020-09-27T16:33:38+08:00">2020-09-27</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>AMReX provides a callable template class PhysBCFunct for users conveniently defining different boundary methods. This class is declared in AMReX_PhysBCFunc.H and is implemented in AMReX_PhysBCFunct.cpp</p>
<p>The implementation of PhysBCFunct is</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">F</span>&gt;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhysBCFunct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//several constructors</span></span><br><span class="line">  <span class="built_in">PhysBCFunct</span>(...)&#123;...&#125;;</span><br><span class="line">  <span class="comment">//call operator</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">(...)</span> </span>&#123;...&#125;</span><br><span class="line">  <span class="comment">//three private members</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  Geometry      m_geom; <span class="comment">// Geometry data</span></span><br><span class="line">  Vector&lt;BCRec&gt; m_bcr; <span class="comment">//  boundary condition records</span></span><br><span class="line">  F             m_f;   <span class="comment">//  a callable object who does the dirty work</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>AMReX</code> provides three types of callable classes as the template argument for PhysBCFunct. The first is <code>BndryFuncArray</code>, which works on arrays. This version is mainly used in fortran-based codes. The second is <code>CpuBndryFuncFab</code>, which works on FArrayBox. This version is mainly used in cpp-based codes. The last one is <code>template &lt;class F&gt; class GpuBndryFuncFab</code>, which is a template class worked on GPU.<br>The implementation of the call operator in PhysBCFunct<Type> is</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> PhysBCFunct&lt;F&gt;::<span class="built_in"><span class="keyword">operator</span></span>() (MultiFab&amp; mf, <span class="keyword">int</span> icomp, <span class="keyword">int</span> ncomp, IntVect <span class="keyword">const</span>&amp; nghost,</span><br><span class="line">                                 Real time, <span class="keyword">int</span> bccomp)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//get the Domain of m_geom;</span></span><br><span class="line">    <span class="keyword">const</span> Box&amp; domain = m_geom.<span class="built_in">Domain</span>(); </span><br><span class="line"></span><br><span class="line">    <span class="comment">//create a new domain based upon the indexType of mf</span></span><br><span class="line">    Box gdomain = amrex::<span class="built_in">convert</span>(domain, mf.<span class="built_in">boxArray</span>().<span class="built_in">ixType</span>()); </span><br><span class="line"></span><br><span class="line">    <span class="comment">//grow the new domain to contain valid + periodic cells</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="comment">/*direction is periodic*/</span>)</span><br><span class="line">    gdomain.<span class="built_in">grow</span>(<span class="comment">/*direction*/</span>, nghost);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//iterate on mf</span></span><br><span class="line">    <span class="keyword">for</span> (MFIter <span class="built_in">mfi</span>(mf); mfi.<span class="built_in">isValid</span>(); ++mfi)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//return the box on which mf is defined</span></span><br><span class="line">        <span class="keyword">const</span> Box&amp; bx = mfi.<span class="built_in">fabbox</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//if the grown domain doesn&#x27;t cover the box, which means  </span></span><br><span class="line">        <span class="comment">//there are cells outside the gdomain</span></span><br><span class="line">        <span class="keyword">if</span> (!gdomain.<span class="built_in">contains</span>(bx))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//set the boundary condition records of bx</span></span><br><span class="line">            amrex::<span class="built_in">setBC</span>(...);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//fill the uncovered cells</span></span><br><span class="line">            <span class="built_in">m_f</span>(...);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The implementation of <code>BndryFuncArray</code> has a brief form of </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BndryFuncArray</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//constructors</span></span><br><span class="line">    <span class="built_in">BndryFuncArray</span> (...) <span class="keyword">noexcept</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="comment">/*parameters*/</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    BndryFuncDefault   m_func   = <span class="literal">nullptr</span>;</span><br><span class="line">    BndryFunc3DDefault m_func3D = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>and the call operator is coded as</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BndryFuncArray::operator</span> <span class="params">()</span> <span class="params">(<span class="comment">/*parameters*/</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//defining a few variables</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="comment">/*loop over components*/</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(m_func != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            <span class="built_in">m_func</span>(...);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="built_in">m_func3D</span>(...);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>BndryFuncArray</code> provides two function pointers, m_func and m_func3D, as the interfaces for filling the uncovered cells. It is the users responsibility to provide the proper functioning modules. A trivial example can be found in <code>/AMReX/amrex/Tutorials/Amr/Advection_AmrCore/Source/bc_fill_nd.F90</code>.</p>
<p>The implementation of <code>CpuBndryFuncFab</code> has a definition of</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CpuBndryFuncFab</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//constructors</span></span><br><span class="line">    <span class="built_in">CpuBndryFuncFab</span> () = <span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">CpuBndryFuncFab</span> (UserFillBox a_f) : <span class="built_in">f_user</span>(a_f) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="comment">/*parameters*/</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    UserFillBox f_user = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>In the implementation of call operator, <code> CpuBndryFuncFab</code> delegates the work of filling the uncovered cells to some built-in functions, which are mainly defined in <code>AMReX_FILCC</code> series header files. User-defined function is needed for exterior boundary conditions, i.e., when the boundary condition record is set to <code>BCType::ext_dir</code>.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/The%20FillPatch%20methods%20in%20AMReX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/The%20FillPatch%20methods%20in%20AMReX/" class="post-title-link" itemprop="url">The FillPatch methods in AMReX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-27 16:52:50" itemprop="dateModified" datetime="2020-09-27T16:52:50+08:00">2020-09-27</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The FillPatch or FillCoarsePatch methods are defined in the header file AMReX_FillPatchUtil.H and are implemented in the AMReX_FillPatchUtil_I.H file. All the functionality is implemented by template functions.</p>
<p>The FillPatch method consists of two primary functions : FillPatchSingleLevel and FillPatchTwoLevels.</p>
<p>FillPatchSingleLevel fills a MultiFab and its ghost region at a single level of refinement. The target MultiFab can be filled by a linear interpolation between two MultiFabs at two different moments.<br>A simplified version of FillPatchSingleLevel is :</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> MF, <span class="keyword">typename</span> BC&gt;</span><br><span class="line">EnableIf_t&lt;IsFabArray&lt;MF&gt;::value&gt;</span><br><span class="line"><span class="built_in">FillPatchSingleLevel</span> (MF&amp; mf, IntVect <span class="keyword">const</span>&amp; nghost, Real time,</span><br><span class="line">                      <span class="keyword">const</span> Vector&lt;MF*&gt;&amp; smf, <span class="keyword">const</span> Vector&lt;Real&gt;&amp; stime,</span><br><span class="line">                      <span class="keyword">int</span> scomp, <span class="keyword">int</span> dcomp, <span class="keyword">int</span> ncomp,</span><br><span class="line">                      <span class="keyword">const</span> Geometry&amp; geom,</span><br><span class="line">                      BC&amp; physbcf, <span class="keyword">int</span> bcfcomp)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (smf.<span class="built_in">size</span>() == <span class="number">1</span>) <span class="comment">//no temporal interpolation</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (&amp;mf == smf[<span class="number">0</span>] <span class="keyword">and</span> scomp == dcomp) <span class="comment">//same MultiFab, identical starting index</span></span><br><span class="line">        &#123;</span><br><span class="line">            mf.<span class="built_in">FillBoundary</span>(<span class="comment">/*Fill the interior boundary, including periodic boundary  </span></span><br><span class="line"><span class="comment">            and interior boundary among MultiFabs at different processes*/</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> </span><br><span class="line">        &#123;</span><br><span class="line">            mf.<span class="built_in">ParallelCopy</span>(<span class="comment">/*parallel copy a MultiFab, fill the interior boundary*/</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (smf.<span class="built_in">size</span>() == <span class="number">2</span>) <span class="comment">//temporal interpolation</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//a, b is interpolation coefficients</span></span><br><span class="line">		<span class="built_in">value</span>(mf) = a*<span class="built_in">value</span>(smf[<span class="number">0</span>]) + b*<span class="built_in">value</span>(smf[<span class="number">1</span>]);</span><br><span class="line">		<span class="comment">//then</span></span><br><span class="line">		mf.<span class="built_in">FillBoundary</span>(...) <span class="keyword">or</span> mf.<span class="built_in">ParallelCopy</span>(...)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;<span class="string">&quot;error&quot;</span>&#125;</span><br><span class="line">	<span class="comment">//fill other mathematical boundaries</span></span><br><span class="line">	<span class="built_in">physbcf</span>(mf, dcomp, ncomp, nghost, time, bcfcomp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>where the meaning of function parameters are<br><code>mf</code> : the MultiFab to be filled;<br><code>nghost</code> : the ghost cell of <code>mf</code>;<br><code>time</code> : the current time used for interpolation;<br><code>smf</code> : vector of <code>MultiFab*</code>, holding the MultiFabs at different times, maximum elements is two;<br><code>stime</code> : the time info for each <code>MultiFab</code> stored in <code>smf</code>;<br><code>scomp</code> : the starting index for the component of <code>MultiFab</code> in <code>smf</code>, s stands for source;<br><code>dcomp</code> : the starting index for the component <code>mf</code>, d stands for destination;<br><code>ncomp</code> : the total number of the components to be filled;<br><code>geom</code>  : the <code>Geometry</code> data for <code>mf</code>;<br><code>physbcf</code> : the callable object to fill the mathematical boundary of <code>mf</code>;<br><code>bcfcomp</code> : the start index for the BCRec defined in <code>physbcf</code>; </p>
<p>FillPatchTwoLevels delegates all its work to a function named FillPatchTwoLevels_doit, who completes the main task of</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> MF, <span class="keyword">typename</span> BC, <span class="keyword">typename</span> Interp, <span class="keyword">typename</span> PreInterpHook, <span class="keyword">typename</span> PostInterpHook&gt;</span><br><span class="line">EnableIf_t&lt;IsFabArray&lt;MF&gt;::value&gt;</span><br><span class="line"><span class="built_in">FillPatchTwoLevels_doit</span> (MF&amp; mf, IntVect <span class="keyword">const</span>&amp; nghost, Real time,</span><br><span class="line">    <span class="keyword">const</span> Vector&lt;MF*&gt;&amp; cmf, <span class="keyword">const</span> Vector&lt;Real&gt;&amp; ct,</span><br><span class="line">    <span class="keyword">const</span> Vector&lt;MF*&gt;&amp; fmf, <span class="keyword">const</span> Vector&lt;Real&gt;&amp; ft,</span><br><span class="line">    <span class="keyword">int</span> scomp, <span class="keyword">int</span> dcomp, <span class="keyword">int</span> ncomp,</span><br><span class="line">    <span class="keyword">const</span> Geometry&amp; cgeom, <span class="keyword">const</span> Geometry&amp; fgeom,</span><br><span class="line">    BC&amp; cbc, <span class="keyword">int</span> cbccomp,</span><br><span class="line">                         BC&amp; fbc, <span class="keyword">int</span> fbccomp,</span><br><span class="line">    <span class="keyword">const</span> IntVect&amp; ratio,</span><br><span class="line">    Interp* mapper,</span><br><span class="line">                         <span class="keyword">const</span> Vector&lt;BCRec&gt;&amp; bcs, <span class="keyword">int</span> bcscomp,</span><br><span class="line">                         <span class="keyword">const</span> PreInterpHook&amp; pre_interp,</span><br><span class="line">                         <span class="keyword">const</span> PostInterpHook&amp; post_interp,</span><br><span class="line">                         EB2::IndexSpace <span class="keyword">const</span>* index_space)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//1. make a copy of the MultiFabs on the coarse level;</span></span><br><span class="line">	<span class="comment">//2. fill the boundary of the copied MultiFabs using FillPatchSingleLevel(mf_coarse);</span></span><br><span class="line">	<span class="comment">//3. fill the coarse-fine boundary of mf from the copied MultiFabs via interpolation;</span></span><br><span class="line">	<span class="comment">//4. fill the boundary of mf by FillPatchSingleLevel(mf);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and the parameters stand for</p>
<p><code>mf</code> : the MultiFab to be filled;<br><code>nghost</code> : the ghost cell of <code>mf</code>;<br><code>time</code> : the current time used for interpolation;<br><code>cmf</code>  : the MultiFabs used to fill the coarse-fine boundaries on the coarse level;<br><code>ct</code>   : the time info for the MultiFabs in <code>cmf</code><br><code>fmf</code>  : the MultiFabs used to fill the interior boundaries on the current level;<br><code>ft</code>   : the time info for the MultiFabs in <code>fmf</code>;<br><code>scomp</code> : the starting index for the component of <code>MultiFab</code> in <code>smf</code> and <code>cmf</code>, s stands for source;<br><code>dcomp</code> : the starting index for the component <code>mf</code>, d stands for destination;<br><code>ncomp</code> : the total number of the components to be filled;<br><code>cgeom</code> : the <code>Geometry</code> info for the coarse level;<br><code>fgeom</code> : the <code>Geometry</code> info for the current level;<br><code>cbc</code>   : the callable object to fill the boundary of <code>cmf</code> on the coarse level;<br><code>cbccomp</code> : starting index for the boundary condition records in <code>cbc</code>;<br><code>fbc</code> : the callable object to fill the boundary of <code>smf</code> on the current level;<br><code>fbccomp</code> : starting index for the boundary condition records in <code>fbc</code>;<br><code>ratio</code> : refinement ratio of coarse level to current level;<br><code>mapper</code> : Interpolation method, defined in AMReX_Interpolater.H;<br><code>bcs</code> : the boundary condition records for <code>mf</code>;<br><code>bcscomp</code> : starting index for the boundary condition records in <code>fbc</code>.</p>
<p>Generally, a FillPatch method should preserve the following pattern</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FillPatchScalar</span><span class="params">(<span class="comment">/*parameters*/</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(lev == <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="built_in">FillPatchSingleLevel</span>(...);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">FillPatchTwoLevels</span>(...)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;.</span><br></pre></td></tr></table></figure>
<p>In a word, FillPatch method fills the coarse-fine boundary by interpolating the data on the coarse level, the interior boundary by copy and the physical boundary by user-provided PhysBCFunct object.</p>
<p>The FillCoarsePatch method should only be invoked when creating a new level. The main work is done by a template function named InterpFromCoarseLevel, whose definition is </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> MF, <span class="keyword">typename</span> BC, <span class="keyword">typename</span> Interp, <span class="keyword">typename</span> PreInterpHook, <span class="keyword">typename</span> PostInterpHook&gt;</span><br><span class="line">EnableIf_t&lt;IsFabArray&lt;MF&gt;::value&gt;</span><br><span class="line"><span class="built_in">InterpFromCoarseLevel</span> (MF&amp; mf, IntVect <span class="keyword">const</span>&amp; nghost, Real time,</span><br><span class="line">                       <span class="keyword">const</span> MF&amp; cmf, <span class="keyword">int</span> scomp, <span class="keyword">int</span> dcomp, <span class="keyword">int</span> ncomp,</span><br><span class="line">                       <span class="keyword">const</span> Geometry&amp; cgeom, <span class="keyword">const</span> Geometry&amp; fgeom,</span><br><span class="line">                       BC&amp; cbc, <span class="keyword">int</span> cbccomp,</span><br><span class="line">                       BC&amp; fbc, <span class="keyword">int</span> fbccomp,</span><br><span class="line">                       <span class="keyword">const</span> IntVect&amp; ratio,</span><br><span class="line">                       Interp* mapper,</span><br><span class="line">                       <span class="keyword">const</span> Vector&lt;BCRec&gt;&amp; bcs, <span class="keyword">int</span> bcscomp,</span><br><span class="line">                       <span class="keyword">const</span> PreInterpHook&amp; pre_interp,</span><br><span class="line">                       <span class="keyword">const</span> PostInterpHook&amp; post_interp)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//1. make a copy of the MultiFabs on the coarse level;</span></span><br><span class="line">	<span class="comment">//2. fill the periodic boundary using a member function named MultiFab::copy and the  </span></span><br><span class="line">	<span class="comment">//   mathematical boundary using the user-provided PhysBCFunct object cbc  </span></span><br><span class="line">	<span class="comment">//3. fill mf from the copied MultiFabs via interpolation;</span></span><br><span class="line">	<span class="comment">//4. fill the boundary of mf by the user-provided PhysBCFunct object fbc  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The meaning of the parameters presented here is identical to the parameters appeared in FillPatchTwoLevels. FillCoarsePatch always fill the whole region from a coarse level.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/OpenFOAM%E6%B3%A8%E5%86%8C%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/OpenFOAM%E6%B3%A8%E5%86%8C%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">OpenFOAM输入输出中的注册机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-04 09:43:57" itemprop="dateModified" datetime="2019-10-04T09:43:57+08:00">2019-10-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>新手刚开始使用OpenFOAM的时候，一般都会对输入输出系统感到费解，为什么定义一个物理量，要这么复杂。</p>
<p>以icoFoam中压力p的构造为例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">volScalarField p</span><br><span class="line"> (</span><br><span class="line">     IOobject</span><br><span class="line">     (</span><br><span class="line">         <span class="string">&quot;p&quot;</span>,</span><br><span class="line">         runTime.<span class="built_in">timeName</span>(),</span><br><span class="line">         mesh,</span><br><span class="line">         IOobject::MUST_READ,</span><br><span class="line">         IOobject::AUTO_WRITE</span><br><span class="line">     ),</span><br><span class="line">     mesh</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
<p> p的构造用到了一个临时的<code>IOobject</code>和mesh，其中mesh定义在createMesh.H头文件中，类型为<code>fvMesh</code>, mesh的构造也用到了<code>IOobject</code>。</p>
<p> 这里我们简略介绍下<code>IOobject</code>, <code>regIOobject</code>以及<code>ObjectRegistry</code>三个类的作用。这三个类的源码位于src/OpenFOAM/db/文件夹中，db是database的缩写，表明这个文件夹下的类都和OpenFOAM数据库的构建有关。</p>
<h2 id="IOobject"><a href="#IOobject" class="headerlink" title="IOobject"></a>IOobject</h2><p><code>IOobject</code>是一个基类，定义了几个枚举类，比较常用的有<code>readOption</code>和<code>writeOption</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">readOption</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    MUST_READ,</span><br><span class="line">    MUST_READ_IF_MODIFIED,</span><br><span class="line">    READ_IF_PRESENT,</span><br><span class="line">    NO_READ</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">writeOption</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    AUTO_WRITE = <span class="number">0</span>,</span><br><span class="line">    NO_WRITE = <span class="number">1</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这两个枚举类用来指定所要构建对象的输入输出方式，本文开始压力p的构造，就用到了MUST_READ和AUTO_WRITE。</p>
<p><code>IOobject</code>中比较重要的几个私有变量有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">word name_; &#x2F;&#x2F;构造对象的名称，如 &quot;p&quot;</span><br><span class="line">const objectRegistry&amp; db_; &#x2F;&#x2F;对象注册处</span><br><span class="line">readOption rOpt_; &#x2F;&#x2F;读入状态</span><br><span class="line">writeOption wOpt_; &#x2F;&#x2F;写出状态</span><br><span class="line">bool registerObject_; &#x2F;&#x2F;是否在构造时注册</span><br></pre></td></tr></table></figure>
<p>这里有一个<code>objectRegistry</code>的引用，在后续对象构造的过程中，非常重要。</p>
<p><code>IOobject</code>的构造函数通过initializer list初始化其成员变量，函数体中包含一些debug的功能代码。</p>
<h2 id="regIOobject"><a href="#regIOobject" class="headerlink" title="regIOobject"></a>regIOobject</h2><p><code>regIOobject</code>派生自<code>IOobject</code>, 它定义了两个比较重要的私有变量</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> registered_;  <span class="comment">//是否注册过</span></span><br><span class="line"><span class="keyword">bool</span> ownedByRegistry_; <span class="comment">//是否所属某个注册处</span></span><br></pre></td></tr></table></figure>
<p>两个经常用到的成员函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">checkIn</span><span class="params">()</span></span>; <span class="comment">//注册</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">checkOut</span><span class="params">()</span></span>; <span class="comment">//注销</span></span><br></pre></td></tr></table></figure>
<p>简单来说，<code>regIOobject</code>是<code>IOobject</code>注册到某一个<code>objectRegistry</code>的具体实现。</p>
<p>如果把<code>IOobject</code>看作学生，<code>objectRegistry</code>看作学生处，那么<code>regIOobject</code>就是帮助学生在学生处注册的工作人员。</p>
<p><code>regIOobject</code>的常用的构造函数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Foam::regIOobject::<span class="built_in">regIOobject</span>(<span class="keyword">const</span> IOobject&amp; io, <span class="keyword">const</span> <span class="keyword">bool</span> isTime)</span><br><span class="line">:</span><br><span class="line">    <span class="built_in">IOobject</span>(io),</span><br><span class="line">    <span class="built_in">registered_</span>(<span class="literal">false</span>),</span><br><span class="line">    <span class="built_in">ownedByRegistry_</span>(<span class="literal">false</span>),</span><br><span class="line">    <span class="built_in">watchIndices_</span>(),</span><br><span class="line">    eventNo_                <span class="comment">// Do not get event for top level Time database</span></span><br><span class="line">    (</span><br><span class="line">        isTime</span><br><span class="line">      ? <span class="number">0</span></span><br><span class="line">      : <span class="built_in">db</span>().<span class="built_in">getEvent</span>()</span><br><span class="line">    )</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Register with objectRegistry if requested</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">registerObject</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">checkIn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>首先用<code>IOobject</code>的构造函数初始化基类部分，默认没有注册过，不属于任何一个注册处，然后通过<code>registerObject()</code>判断是否需要注册，如果需要就调用<code>checkIn()</code>注册对象。其中<code>registerObject()</code>继承自<code>IOobject</code>，返回<code>IOobject</code>中<code>registerObject_</code>的值。</p>
<p>接下来我们看一看<code>checkIn()</code>具体做了什么，它的实现：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> Foam::regIOobject::<span class="built_in">checkIn</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!registered_)</span><br><span class="line">    &#123;</span><br><span class="line">        registered_ = <span class="built_in">db</span>().<span class="built_in">checkIn</span>(*<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> registered_;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们看到，具体的注册工作由<code>db().checkIn(*this)</code>来完成，其中<code>db()</code>继承自<code>IOobject</code>， 返回一个objectRegistry的引用，就是上文提到的<code>IOobject</code>中一个非常重要的私有变量，对象注册处db_。</p>
<h2 id="objectRegistry"><a href="#objectRegistry" class="headerlink" title="objectRegistry"></a>objectRegistry</h2><p><code>objectRegistry</code>继承自<code>regIOobject</code>和<code>HashTable&lt;regIOobject*&gt;</code>，后者是一个由<code>regIOobject</code>的指针构成的哈希表，<code>HashTable</code>是一个模版类，默认key值为OpenFOAM中的<code>word</code>类型。</p>
<p>上文说道checkIn()的工作，实际上是由<code>objectRegistry</code>中的<code>checkIn()</code>来完成的，它的具体实现如下</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> Foam::objectRegistry::<span class="built_in">checkIn</span>(regIOobject&amp; io) <span class="keyword">const</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">const_cast</span>&lt;objectRegistry&amp;&gt;(*<span class="keyword">this</span>).<span class="built_in">insert</span>(io.<span class="built_in">name</span>(), &amp;io);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>忽略debug部分，这个函数在丢弃自身low-level const属性后，在哈希表中插入了key为io.name()，value为某个<code>regIOobject*</code>的对象， 这里io.name()调用的实际上是继承自<code>IOobject</code>的成员函数， 而insert继承自<code>HashTable&lt;regIOobject*&gt;</code>。</p>
<p>现在就比较清晰了，我们来看看icoFoam中定义压力场p的时候，具体发生了什么。这里p用到的构造函数为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IOobject</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">const</span> word&amp; name,</span><br><span class="line">    <span class="keyword">const</span> fileName&amp; instance,</span><br><span class="line">    <span class="keyword">const</span> objectRegistry&amp; registry,</span><br><span class="line">    readOption r=NO_READ,</span><br><span class="line">    writeOption w=NO_WRITE,</span><br><span class="line">    <span class="keyword">bool</span> registerObject=<span class="literal">true</span></span><br><span class="line">);</span><br><span class="line"><span class="built_in">GeometricField</span>(<span class="keyword">const</span> IOobject&amp;,<span class="keyword">const</span> Mesh&amp;);</span><br></pre></td></tr></table></figure>
<p>首先构造临时的<code>IOobject</code>对象，名字为”p”，文件名为”runTime.timeName()”，它会注册到”mesh”上面，这是一个fvMesh对象，必须通过读入初始化，自动写。GeometricField构造函数中的第二个参数Mesh来自于GeoMesh::Mesh,它是类模板GeoMesh的模版参数，对于压力场p来说，Mesh = fvMesh。</p>
<p>这里实际用到的构造函数为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">Type</span>, <span class="title">template</span>&lt;</span><span class="class"><span class="keyword">class</span>&gt;</span> <span class="class"><span class="keyword">class</span> <span class="title">PatchField</span>, <span class="keyword">class</span> <span class="title">GeoMesh</span>&gt;</span></span><br><span class="line">Foam::GeometricField&lt;Type, PatchField, GeoMesh&gt;::GeometricField</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">const</span> IOobject&amp; io,</span><br><span class="line">    <span class="keyword">const</span> Mesh&amp; mesh</span><br><span class="line">)</span><br><span class="line">:</span><br><span class="line">    <span class="built_in">Internal</span>(io, mesh, dimless, <span class="literal">false</span>),</span><br><span class="line">    <span class="built_in">timeIndex_</span>(<span class="keyword">this</span>-&gt;<span class="built_in">time</span>().<span class="built_in">timeIndex</span>()),</span><br><span class="line">    <span class="built_in">field0Ptr_</span>(<span class="literal">nullptr</span>),</span><br><span class="line">    <span class="built_in">fieldPrevIterPtr_</span>(<span class="literal">nullptr</span>),</span><br><span class="line">    <span class="built_in">boundaryField_</span>(mesh.<span class="built_in">boundary</span>())</span><br><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上述构造函数中，<code>Internal(io, mesh, dimless, false)</code>的作用是初始化内部场， 这里<code>Internal</code>是<code>DimensionedField&lt;Type, GeoMesh&gt;</code>的一个别名，就压力p的构造而言，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Type &#x3D; Scalar, GeoMesh &#x3D; volMesh</span><br></pre></td></tr></table></figure>
<p>用到的构造函数为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">Type</span>, <span class="keyword">class</span> <span class="title">GeoMesh</span>&gt;</span></span><br><span class="line">DimensionedField&lt;Type, GeoMesh&gt;::DimensionedField</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">const</span> IOobject&amp; io,</span><br><span class="line">    <span class="keyword">const</span> Mesh&amp; mesh,</span><br><span class="line">    <span class="keyword">const</span> dimensionSet&amp; dims,</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">bool</span> checkIOFlags</span><br><span class="line">)</span><br><span class="line">:</span><br><span class="line">    <span class="built_in">regIOobject</span>(io),</span><br><span class="line">    Field&lt;Type&gt;(GeoMesh::<span class="built_in">size</span>(mesh)),</span><br><span class="line">    <span class="built_in">mesh_</span>(mesh),</span><br><span class="line">    <span class="built_in">dimensions_</span>(dims)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (checkIOFlags)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">readIfPresent</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述构造函数中有一句<code>regIOobject(io)</code>，将构造的压力场p注册到mesh上，至此完成了对象的注册过程。</p>
<p>至于runTime.write()是如何调用这些注册对象统一写入文件，请参考<br><a target="_blank" rel="noopener" href="http://openfoamwiki.net/index.php/OpenFOAM_guide/objectRegistry">http://openfoamwiki.net/index.php/OpenFOAM_guide/objectRegistry</a><br>section 4.3</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/BUG%20Records/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/BUG%20Records/" class="post-title-link" itemprop="url">A post records all the stupid bugs the author composed</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-03 22:20:39" itemprop="dateModified" datetime="2020-10-03T22:20:39+08:00">2020-10-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <span id="more"></span>
<ul>
<li>Program : AMReXDUGKS　File : DUGKSCoreImp.H　Date : 2020.10.01<br>detail : The coefficient corresponding to xEq, which should be<br>$$\frac{3h}{2{\tau}-{\Delta}{t}}$$ is mistakenly written as<br>$$\frac{h}{2{\tau}-{\Delta}{t}}$$. It took the author two full days to locate the bug.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/04/06/AMReX%E4%B8%ADAmrMesh%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/04/06/AMReX%E4%B8%ADAmrMesh%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/" class="post-title-link" itemprop="url">AMReX中AmrMesh类的初始化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-06 21:15:27" itemprop="dateCreated datePublished" datetime="2021-04-06T21:15:27+08:00">2021-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-11 16:27:07" itemprop="dateModified" datetime="2020-09-11T16:27:07+08:00">2020-09-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>AmrMesh类是AMReX平台的基础功能类，用于设定实际问题的边界，计算域的初始网格，边界条件周期性等等。其默认构造函数的具体实现为</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">AmrMesh::<span class="built_in">AmrMesh</span> ()</span><br><span class="line">&#123;</span><br><span class="line">    Geometry::<span class="built_in">Setup</span>();</span><br><span class="line">    <span class="keyword">int</span> max_level_in = <span class="number">-1</span>;</span><br><span class="line">    <span class="function">Vector&lt;<span class="keyword">int</span>&gt; <span class="title">n_cell_in</span><span class="params">(AMREX_SPACEDIM, <span class="number">-1</span>)</span></span>;</span><br><span class="line">    <span class="built_in">InitAmrMesh</span>(max_level_in,n_cell_in);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中<code>Geometry::Setup()</code>为定义在AMReX_Geometry.H中的静态函数，有三个缺省参数，这个函数会读取input文件中geometry.coord_sys, geometry.prob_lo, geometry.prob_hi, geometry.is_periodic这四个参数，用于设定计算坐标系，具体问题边界以及周期性边界条件，之后的工作由私有函数<code>InitAmrMesh(...)</code>完成。</p>
<p>InitAmrMesh(…)的声明如下:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitAmrMesh</span> <span class="params">(<span class="keyword">int</span> max_level_in, <span class="keyword">const</span> Vector&lt;<span class="keyword">int</span>&gt;&amp; n_cell_in,</span></span></span><br><span class="line"><span class="function"><span class="params">                      Vector&lt;IntVect&gt; refrat = Vector&lt;IntVect&gt;(),</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="keyword">const</span> RealBox* rb = <span class="literal">nullptr</span>, <span class="keyword">int</span> coord = <span class="number">-1</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                      <span class="keyword">const</span> <span class="keyword">int</span>* is_per = <span class="literal">nullptr</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>包含四个缺省参数，其中后三个参数<code>rb, coord, is_per</code>分别对应具体问题边界，计算坐标系以及周期性边界条件，这些工作已经由<code>Geometry::Setup()</code>完成，<code>max_level_in</code>和<code>n_cell_in</code>默认值都为-1，<code>refrat</code>表示相邻层级间网格长度的比值，具有最高优先级，会覆盖掉input中的ref_ratio，在<code>InitAmrMesh(...)</code>的具体定义中，主要设定以下几个参数：</p>
<ul>
<li>verbose<br>是否详细输出信息，非0为详细输出</li>
<li>max_level<br>自适应过程中网格的最大层数</li>
<li>n_cell<br>最底层(level 0)计算域网格数目,必须为三个整数，如“8 8 8”</li>
<li>max_grid_size<br>每个子计算域最大网格数，默认值为128(2D) 和 32(3D)</li>
<li>blocking_factor<br>网格粗化参数，必须确保计算域n_cell和max_grid_size都能被blocking_factor整除，默认值为8 8 8</li>
<li>ref_ratio<br>相邻层网格单元长度比值，默认为2 2 2 </li>
<li>n_error_buffer<br>标记网格过程中(加密前)缓冲区大小，越大则标记的网格距离coarse/fine边界越远，默认为1 1 1</li>
<li>n_proper<br>与网格自适应过程中coarse level box能否恰当覆盖fine level box有关，具体意义不明，默认1</li>
<li>grid_eff<br>与fine level box 大小有关，越大fine level box 覆盖区域越小，同时box个数越多，默认0.7</li>
<li>refine_grid_layout<br>若进程数大于本层boxArray数目(Ngrids &lt; Nprocs)，继续分割boxArray，直到进程数小于boxArray数目(Ngrids &gt; Nprocs),默认true</li>
<li>check_input<br>输入检查，默认true</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/01/22/sed-replace-value-after-equal-symbol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/01/22/sed-replace-value-after-equal-symbol/" class="post-title-link" itemprop="url">sed-replace-value-after-equality-sign</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-22 10:42:46 / 修改时间：20:45:23" itemprop="dateCreated datePublished" datetime="2021-01-22T10:42:46+08:00">2021-01-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>To find the lines in TheFile that starts with the word power followed by some amount of whitespace and an equal sign, and to replace whatever comes after that equal sign with something:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -E &#39;s&#x2F;^(power[[:blank:]]*&#x3D;[[:blank:]]*).*&#x2F;\1something&#x2F;&#39; </span><br></pre></td></tr></table></figure>
<p>TheFile <code>[[:blank:]]*</code> matches zero or more spaces or tabs. This preserves the whitespace before and after the <code>=</code>. The <code>\1</code> in the replacement text will insert the part of the string that is matched by the first parenthesis.</p>
<p>To make the change in place with e.g. GNU sed, add the -i flag, otherwise, redirect the output to a new file.</p>
<p>Testing it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cat TheFile</span><br><span class="line">power                 &#x3D; 1</span><br><span class="line">power123              &#x3D; 1</span><br><span class="line">power  123            &#x3D; 1</span><br><span class="line">power                 &#x3D;</span><br><span class="line">power                 &#x3D;                 112</span><br><span class="line"></span><br><span class="line">$ sed -E &#39;s&#x2F;^(power[[:blank:]]*&#x3D;[[:blank:]]*).*&#x2F;\1something&#x2F;&#39; TheFile</span><br><span class="line">power                 &#x3D; something</span><br><span class="line">power123              &#x3D; 1</span><br><span class="line">power  123            &#x3D; 1</span><br><span class="line">power                 &#x3D;something</span><br><span class="line">power                 &#x3D;                 something</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2021/01/02/Python%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2021/01/02/Python%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">python安装与配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-02 10:42:46 / 修改时间：10:45:34" itemprop="dateCreated datePublished" datetime="2021-01-02T10:42:46+08:00">2021-01-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以Python-3.8.7为例，介绍其在usr/local/下的安装过程。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/DUGKS/DUGKS.github.io/2021/01/02/Python%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/DUGKS/DUGKS.github.io/2017/11/21/%E4%B8%AA%E4%BA%BA%E8%B4%A6%E6%88%B7%E4%B8%8Bgcc%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/DUGKS/DUGKS.github.io/images/avatar.gif">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="命由我作 福自己求">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/DUGKS/DUGKS.github.io/2017/11/21/%E4%B8%AA%E4%BA%BA%E8%B4%A6%E6%88%B7%E4%B8%8Bgcc%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">gcc安装与配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-11-21 21:54:46" itemprop="dateCreated datePublished" datetime="2017-11-21T21:54:46+08:00">2017-11-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-06 11:21:13" itemprop="dateModified" datetime="2021-01-06T11:21:13+08:00">2021-01-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以gcc-7.5.0为例，介绍其在usr/local/下的安装过程。<br>gcc依赖gmp,mpfr,mpc,isl这三个库，在<a target="_blank" rel="noopener" href="https://gcc.gnu.org/pub/gcc/infrastructure/">这里</a> 下载最新版本<br>本文使用gmp-6.1.0.tar.xz, mpc-1.0.3.tar.gz, mpfr-3.1.4.tar.xz, isl-0.18.tar.xz这几个个版本。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/DUGKS/DUGKS.github.io/2017/11/21/%E4%B8%AA%E4%BA%BA%E8%B4%A6%E6%88%B7%E4%B8%8Bgcc%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/DUGKS/DUGKS.github.io/page/2/">2</a><a class="extend next" rel="next" href="/DUGKS/DUGKS.github.io/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/DUGKS/DUGKS.github.io/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/DUGKS/DUGKS.github.io/tags/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/DUGKS/DUGKS.github.io/lib/anime.min.js"></script>
  <script src="/DUGKS/DUGKS.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/DUGKS/DUGKS.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/DUGKS/DUGKS.github.io/js/utils.js"></script>

<script src="/DUGKS/DUGKS.github.io/js/motion.js"></script>


<script src="/DUGKS/DUGKS.github.io/js/schemes/muse.js"></script>


<script src="/DUGKS/DUGKS.github.io/js/next-boot.js"></script>




  















  

  

</body>
</html>
